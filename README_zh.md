# 文件哈希校验工具

一个基于 Python 的多算法文件哈希值计算工具，具有图形界面和智能分块优化功能。
支持 MD5、SHA1、SHA256、SHA512 等多种哈希算法，计算大文件时效率远超系统自带工具。

## 功能特性

- **多算法支持**: 支持 MD5、SHA1、SHA256、SHA512 等多种哈希算法
- **图形界面支持**: 使用 Tkinter 提供文件选择对话框和哈希值输入对话框
- **命令行回退**: 在没有图形界面的环境中自动回退到命令行输入
- **智能分块优化**: 根据文件所在磁盘类型（SSD/HDD）自动调整读取分块大小
- **实时进度显示**: 使用 `alive-progress` 库显示计算进度条
- **哈希值校验**: 支持输入自定义哈希值进行文件校验比对
- **跨平台兼容**: 支持 Windows 系统，非 Windows 系统使用默认分块大小

## 性能比较

![性能比较演示](src/performance.gif)

文件越大，差距越明显

## 安装依赖

```bash
pip install -r requirements.txt
```

主要依赖包：
- `tkinter` - 图形界面支持
- `alive-progress` - 进度条显示
- `hashlib` - 哈希算法计算

## 使用方法

1. 运行程序：
   ```bash
   python main.py
   # 在 Windows 系统中，可以直接双击打开
   ```

2. 选择哈希算法
   - 在图形界面中选择 MD5、SHA1、SHA256 或 SHA512 算法
   - 在无图形界面环境中通过数字选择算法

3. 选择要计算哈希值的文件
   - 在图形界面中通过文件选择对话框选择文件
   - 在无图形界面环境中通过命令行输入文件路径

4. 输入要比较的哈希值（可选）
   - 在对话框中输入对应算法的哈希值进行校验
   - 留空则只显示计算出的哈希值

5. 查看结果
   - 程序会显示计算进度条
   - 输出文件的哈希值
   - 如果输入了校验值，会显示比对结果

## 智能分块优化

程序会根据文件所在磁盘类型自动优化读取分块大小：

- **SSD**: 512KB 分块大小
- **HDD**: 256KB 分块大小  
- **默认**: 1MB 分块大小（无法检测磁盘类型时）

这种优化可以提高大文件的计算效率，特别是在不同存储介质上。

## 程序结构

- `get_ssd_or_hdd()`: 检测系统磁盘类型（仅 Windows）
- `select_algorithm()`: 选择哈希算法
- `select_file()`: 文件选择功能
- `input_hash()`: 哈希值输入功能
- `_chunk_size()`: 智能分块大小判断
- `calculate_hash_with_progress()`: 带进度条的哈希计算
- `hash_diff()`: 哈希值比对
- `main()`: 主程序逻辑

## 注意事项

- 程序主要针对 Windows 系统优化
- 非 Windows 系统会使用默认分块大小
- 需要适当的权限来访问文件和磁盘信息
- 支持所有类型的文件格式
- 在虚拟机运行时，可能不会获得准确的硬盘类型

## 项目初衷

系统自带的工具计算哈希真的慢的要死，小文件还好，如果文件有100G呢？

可能我老了都不一定能算出来，所以我写了这个工具，希望能帮助到大家

而且也没有可视化的进度条，都不知道进行到哪一步了